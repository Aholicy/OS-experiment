20337263 俞泽斌

10.1 考虑这样一个文件系统： 当一个文件链接仍然存在时， 能够删除这个文件并回收其磁盘空间。 如果新创建的文件处在同一个存储区域或具有同样的绝对路径名称， 则会出现什么问题？ 如何才能避免这些问题？  

问题：文件链接依旧存在，所以访问文件链接的时候可能就访问到这个新创建的文件上去了，想要对旧文件的改动都改动到新的文件上去了。

措施：1、当访问一个已删除文件的时候，删除当前的文件链接

​            2、当删除文件的时候，删除所有有关的文件链接



10.6 如果操作系统知道某个应用按顺序访问文件数据， 则如何利用这个信息来提高性能？

在访问前面的文件数据的时间内，提前将访问位置后的数据按顺序读入内存中，使得在后续访问的时候不需要再次进行 I/O 等待，能够提高性能。



11.2 对于顺序和随机的文件访问， 比较磁盘块分配（ 连续的 、 链接的和索引的） 的三种技术的性能。  

连续分配：连续分配文件的访问非常容易，但是难以为新文件找到空间。  连续分配支持顺序访问和直接访问。 能够一次访问就找到具体数据。

链接分配：只能有效用于顺序访问文件。 要找到文件的第 i个块， 必须从文件的开始起， 跟着指针， 找到第 i 块。链接分配不能有效支持文件的直接访问 ，对于随机访问，其性能不好，访问文件的第 i 块最坏的情况下需要访问 i 次硬盘   。

索引分配：如果索引块已在内存， 则可以进行直接访问。 然而， 在内存中保存索引块需要相当大的空间。 如果没有这个内存空间， 则可能必须先读取索引块， 再读取所需的数据块。 对于两级索引， 可能需要读取两次索引块。支持顺序访问和直接访问。



11.8 考虑一个文件系统采用 inode 来表示文件。 磁盘块大小为 8KB, 磁盘块指针需要 4 字节。 这个文件系统具有 12 个直接磁盘块， 以及一级的、 二级的和三级的间接磁盘块。 这个文件系统存储文件的最大大小是什么？     

12 * 8KB+ 8KB/4b *8KB +8KB/4b * 8KB/4b *8KB+8KB/4b * 8KB/4b * 8KB/4b*8KB=96KB + 16MB + 32GB + 64TB



12.3假设一个磁盘驱动器有 5000 个柱面， 从 0 到 4999。 该驱动器目前正在处理请求柱面 2150, 以前请求为柱面 1805。 按 FIFO 顺序的等待请求队列是：
2069,1212, 2296, 2800, 544, 1618, 356, 1523, 4965, 3681
从当前磁头位置开始， 针对以下每个磁盘调度算法， 磁臂移动以满足所有等待请求的总的移动距离是多少。
a.FCFS
b.SSTF
c.SCAN
d.LOOK
e.C-SCAN
f.C-LOOK  

FCFS:

移动顺序：2150，2069，1212，2296，2800，544，1618，356，1523，4965，3681

总移动距离：13011

SSTF:

移动顺序：2150, 2069, 2296, 2800, 3681, 4965, 1618, 1523, 1212, 544, 356

总移动距离：7586

SCAN:

移动顺序： 2150, 2296, 2800, 3681, 4965, 4999, 2069, 1618, 1523, 1212, 544, 356

总移动距离：7492

LOOK:

移动顺序：2150, 2296, 2800, 3681, 4965, 2069, 1618, 1523, 1212, 544, 356

总移动距离：7424

C-SCAN:

移动顺序：2150, 2296, 2800, 3681, 4965, 4999, 0, 356, 544, 1212, 1523, 1618, 2069

总移动距离：9917

 C-LOOK：

移动顺序：2150, 2296, 2800, 3681, 4965, 356, 544, 1212, 1523, 1618, 2069

总移动距离：9137

 

12.5假设习题 12.4 中的磁盘按 7200 RPM 转动。
a.这个磁盘驱动器的平均旋转延迟是多少？
b.在 a 中算出的时间里， 可以寻道多少距离？  

a、7200RPM =120r /s

平均旋转延迟=1/(2*120)=4.2ms

b、x+y=1

​      x+√50 *y=18

联立解得 x=0.756，y=0.244

t=0.756+√L *0.244      t=4.2

得L=199



13.1 当源自不同设备的多个中断大约一起出现时， 可以使用优先级方案来确定中断服务的顺序。 当对不同中断陚予优先级时， 讨论什么问题需要加以考虑。  

1、设备引发的中断的优先级大于软件产生的系统调用使用的中断

2、对其数据处理时间有实时限制的中断的优先级大于没有什么时间限制的中断

3、没有数据缓冲区的中断的优先级要大于有数据缓冲区的中断



13.2 支持内存映射I/O到设备控制寄存器的优点和缺点是什么？  

优点：不需要指令集中的特殊I/O指令，因此也不需要执行保护规则和代码

缺点：因为软件出错的常见类型之一是， 通过一个错误指针向一个不该写的内存区域写数据， 所以内存映射设备寄存器容易受到意外修改。

  

13.6 描述应该采用阻塞 I/O 的三种情况。 描述应该采用非阻塞 I/O 的三种情况。 为什么不只实现非阻塞 I/O 而让进程忙等直到设备就绪？  

阻塞 I/O：有线性的执行逻辑 ，进程后续逻辑要求数据完整 其他进程无需 I/O ，可以阻塞当前 I/O 进程，执行其他进程

非阻塞 I/O：用户接口， 用来接收键盘和鼠标输入， 同时处理数据并显示到屏幕。  另一个例子是视频应用程序， 用来从磁盘文
件上读取帧， 同时解压并显示输岀到显示器。  

因为如果只实现非阻塞的在 I/O 而让进程忙等直到设备就绪， 等待的过程中会占用大量的 CPU 资源，而如果是阻塞的 I/O就可以直接将需要 I/O输入的进程挂起，执行其他进程直到被 I/O输入才继续。